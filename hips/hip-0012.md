---
hip: "0012"
title: "Helm 4 Development Process"
authors: [ "Matt Butcher <matt.butcher@fermyon.com>", "George Jenkins <gvjenkins@gmail.com>", "Matt Farina <matt.farina@suse.com>" ]
created: "2021-04-02"
type: "process"
status: "draft"
---

## Abstract

Helm 4 is planned as the next major version release of Helm.
With KubeCon/CloudNativeCon North America 2024 marking the five year anniversary since the successful Helm 3 release.
The development of Helm for is strongly desired in order to continue to evolve Helm and its ecosystem.

This HIP documents the requirements and process for building Helm 4.
Describing the scope of Helm 4 changes.
With particular concern to maintaining continuality in the Helm ecosystem.

This HIP also aims for an open and productive process that enables Helm 4 to build on the success of Helm 3 and to continues to evolve Helm for the success of the Helm communitity.

## Motivation

Helm 3 has been greatly sucessful.
And Helm has built a significant ecosystem around the Helm client (CLI), charts, chart repositories, SDK, plugins, etc.
As Kubernetes continues to grow and change, Helm needs to adapt to those changes while continuing to grow new features and functionality to support its mission around package management for Kubernetes.

However, Helm has also accumulated debt.
And Helm 3 today has the significant issue that many (good) changes are overly difficult to implement due to Helm's [backwards compatibility guarentees](./hip-0004.md): either changes in behavioural functionality or API incompatibile changes are not allowed during regular minor/patch version releases.

Helm 4 as a major release allows the project to make API and other breaking changes.
That will enable the project to reduce technical debt and leverage newer capabilities of Kubernetes.

However, Helm 4 must maintain continuality in Helm ecosystem.
It is mandatory that Helm 4 _must_ be largely functionally/feature compatible with Helm 3.
Signifcant functional breakage will prevent users from easily migrating to Helm 4.
Will at best delay Helm 4 uptake and incur cost to Helm's users.
Or at worst splinter the Helm ecosystem.

The project also seeks to timebox the Helm 4 release process.
Given the limited amount of community resource to enact change(s), it is considered much more important to produce a Helm 4 release which can deliver significant benefits in a moderate timeframe.
Than a protracted process which takes too long to deliver meaningful results.

## Rationale

During the Helm 3 process, Helm core maintainers received criticism that the development process was not described publicly enough.
So this proposal attempts to spell out a formal process for a sucessful Helm 4 release.

Further criticism was that it was unclear who was "running the show" and how they were making decisions.
Finally, we were criticized for not explaining the criteria we were using for determining when Helm 3 was complete.

This document is intended to address these criticisms and present a reasonable plan for timely delivery of a valuable Helm 4 release to the community.
It describes the process in detail, providing both a method for us to follow and a point of reference for community members to follow for contributing changes.

The process based on the following ideas:

- Requiring changes to be documented (either Helm 4 proposals, or standard HIPs).
Both allows Helm communitity members to review changes, and allow Helm maintainers to provide oversight on the functional and architectual implementation of the given change. Ensuring changes are in good standing with respect to this HIP.
Finally, documented changes should allow contributors to independently execute changes to the agreed proposal in coordination with the release engineer.

- Requiring a timeboxed development effort intends to both promote focus on the most valuable changes that the community/maintainers can deliver within a reasonable timeframe.
And avoid an "open ended" development cycle that might drag on and/or fizzle out.
Ideally the majority of changes will be proposed and agree upon early in the development cycle (the planning phase).
But changes to this initial scope can be ammended during the course of the development lifecycle.
So long as they can fit within the agreed upon timeframe.
Making amending the scope an exlicit requirement seeks to ensure that any changes are well thought out.
For further changes that don't make it into Helm 4, there will be a Helm 5 of course!


## Specification

### The process / timelines

Helm 4 development will consist of three main phases:
1. Planning
1. Feature development
1. Release preparation

The timeline will be approximately:

1. Marking this HIP as "accepted"
1. Naming of a Release Engineer: Nov. 2024
1. Kick-off meeting: KubeCon/CloudNativeCon North America 2024 (Salt Lake City)
1. Earliest that engineering can begin: Nov. 2024
1. Expected release of Helm v4.0.0 will be planned for the week before KubeCon/CloudNativeCon North America 2025 (expected November 2025)

Helm v4.1.0 will be in January and from then on it will follow the same release cadence that Helm v3 has, shadowing Kubernetes by approximately 1 month.

Helm 3 will reach end of life six months after Helm 4 release (July. 2026 estimated)

### Change suitability

The Helm ecosystem is large and encompasses not just the Helm CLI, but also the SDK, Charts, and Chart repositories, plugins, etc.
Helm also has several [roles or personas](https://github.com/helm/community/blob/main/user-profiles.md) for different users categories
From "Application Operators" to "Helm Developers".
The Helm project must be judicious in how it delivers changes without significant adverse impact to Helm's users or the overall Helm ecosystem.

So, while Helm 4 doesn't need not be semantically backwards compatible with Helm 3.
It must not cause significant breakage for users choosing to adopt Helm 4.
With migration options and paths clearly present and documented for Helm 3 users to update to Helm 4.

### Change proposals

In order to ensure Helm 4 changes are aligned to this HIP, Helm core mantainers will review proposals. Either in the form of Helm 4 specific proposals (intended to be a lighter-weight process to HIPs). Or HIPs, which deemed to be suitable for Helm 4 implementation.

When a Helm 4 proposal is deemed suitable, it will be marked as implementable in the hips/helm-v4 [hips/helm/helm-v4](https://github.com/helm/community/tree/main/hips/helm/helm-v4) directory.
Standard Helm HIPs, marked as suitable for Helm 4, will also be accepted.

#### Helm 4 proposals

"Helm 4 proposal" are simply a lightweight version of the Helm HIP process.
Intended to reduce the friction to implement small changes for Helm 4.
That don't warrent/require a full HIP process.
See appendix for a template of the proposal.


### Compatbility

Even with Helm 4 being a major version release which does not need to adhere to [HIP-0004](./hip-0004.md) compatibility guarentees.
As Helm is mature software, with a significant ecosystem built around the CLI, charts, the SDK, etc.
Helm 4 must remain largely feature/functionality compatible with Helm 3.

Where non-compatible changes are introduced, they must either have migration documentation for equivalent functionality.
Removal of functionality should prefer deprecation for later removal.
Behavioural changes that negatively affect a significant number of users (without a reasonable migration) can't be allowed.

Specific requirements for compatibility include the below:

#### Compatbility with existing charts and releases

While the tooling can evolve, Helm must maintain compatibility with existing charts and releases.
A Helm 4 which is unable to operate on Helm 3 charts (and vice versa) is practically a different tool.
And as such would diverge the Helm ecosystem.

Specifically, charts that can be deployed with Helm 3 must be deployable by Helm 4.
And similarly, any release created by Helm 3 much be managable by Helm 4.
Helm 3 must also be able to upgrade releases created by Helm 4.0 (Later releases in the Helm 4.x series may make Helm 3 incompatible changes)

Exceptions for already deprecated functionality e.g. `requirements.yaml` may be made.

#### Compatbility with existing CLI workflows

The Helm CLI is ingrained in thousands of release pipelines and automation systems.
So while the CLI can evolve, it must remain loosely compatible with existing users workflows.

A judgement call will need to be made by the release engineer and maintainers to how much a given change will overall affect user workflows. And the options to mitigate those changes.

As a baseline, it is desirable to the majority of Helm 3 CLI "Application Operator" users to be unaffected by Helm 4 upgrade.
Or only need to make minor changes to their workflow to incorporate Helm 4 into their workflows e.g. adjusting CLI flags.
With changes being clearly described in a migration document.

Other users e.g. "Application Developers" tend to be more advanced. And can have more significant changes imposed at the judgement of the Release Engineer and maintainers.

### The Release Engineer

A single individual will oversee the planning and development phases of Helm 4.
This person will be the _Release Engineer_.
The person will have the following responsibilities:

- Lead the kick-off meeting
- Define the process for including features
- Determine the timelines for development
- Make the determination of when the project has indeed reached a milestone
- Name and oversee releases
- After the release, the release engineer will determine what the "intent" of a Helm behavior was (which informs determining whether an incoming breaking change is a feature or a bug fix)

#### Determining Who Will Be Release Engineer

The release engineer must be a core maintainer on the <https://github.com/helm/helm> project.
The engineer must not be in danger of losing core maintainer-ship due to inactivity.
Anyone can nominate a core maintainer to become the release engineer (self-nominations are encouraged).
Any nominee must _agree_ to the nomination.
The Helm project maintainers will determine which of the nominated maintainers shall be the release engineer.

In the event that a release engineer cannot perform the duties required,
the Helm project maintainers may choose a replacement.

#### Planning

This phase begins when the release engineer is named.
The release engineer shall schedule a kick-off meeting in which all Helm maintainers (from any Helm org project) will be invited to participate.
Beyond these participants, the release engineer may determine who else will be included, and may determine the meeting to be public.
The kick-off meeting will open the floor to feature ideas and changes, with preference toward ideas already documented as HIPs.

This process will continue as long as the release engineer determines necessary,
but not less than three months.
This minimum time frame is intended to give ample time for the community to provide input.

All features and breaking changes MUST be described in a HIP, and that HIP must pass the usual process.
This provides three benefits:

- All changes are documented
- All changes have had a period of scrutiny prior to the PR being written
- There is a clear record of alternative considerations

Things that are deemed by core maintainers to be "bug fixes" (and not changes or features) do not need HIPs.

The outcome of the planning cycle is a clear record of approved HIPs describing Helm 4 features.
This must be done prior to development beginning.
This list of HIPs will serve as the "blueprint" for working on Helm 4.

#### Feature Development

During this phase, the features and changes agreed upon during planning will be implemented in a development branch of Helm.
Breaking changes are explicitly allowed, as are experimental features that may be removed prior to final release.
PR approval will follow the usual process, but with the exception that any PR that is not part of the existing plan MUST be approved by the Release Engineer.

This phase culminates in Alpha releases, in which features may still be added and breaking changes may be made as determined appropriate by the release engineer.

#### Release Preparation

During this last phase, no new features will be added except as determined by the release engineer to be critical.
Emphasis will be on bug fixes, documentation improvement, security audits and fixes, and preparation of the ecosystem (e.g. charts changed).
All Beta and RC releases are done as part of this phase.

Prior to the stable release there will be 4-6 weeks of release candidates for the public to test. The time period will be determined by the testing and state of trust in the code leading up to the release candidate window.

This phase will terminate, and Helm 4.0.0 development will be deemed complete, upon the release of Helm 4.0.0.

However, this phase must not be less than three months in order to give the broader ecosystem ample time to test and provide feedback.

### Halting Helm 4 Development

During the course of development, it may turn out that there is not sufficient reason to continue development on Helm 4.
For example, there may not be enough feature HIPs to justify releasing,
or the HIPs may not achieve enough sponsorship or support from Helm project maintainers.

In this case, the Helm maintainers may hold a "circuit breaker" vote to halt Helm 4 development until such a time when it is warranted.

The process for halting Helm 4 development will be a simple majority vote by the Helm project maintainers.

### Maintaining Helm 3

This section outlines how we will support Helm 3 during Helm 4 development. However, the Release Engineer is at liberty to refine this section in the name of maintaining the best experience for Helm users.

During the "Feature Development" cycle of Helm 4, Helm 3 will continue to receive security, bug, and minor feature patches.

During the Alpha, Beta, and RC phases of Helm 4, Helm 3 will not receive any feature patches. This is to prevent Helm 3 from introducing features that should be in Helm 4, but during a window when Helm 4's features are frozen.

Helm 3 will receive 6-8 months of bug fixes and one year of security fixes from the day that Helm 4 is released.

## Backwards compatibility

Nothing in this document is contrary to our existing process for decision making.
Specifically [HIP-0004](./hip-0004.md) applies to minor/patch releases only.
And not a major version release.
Note that this does not change the PR review process or the HIP process.
It assumes that both of those processes will remain the same.

## How to teach this

Helm 4 plans are to be announced KubeCon/CloudNativeCon North America 2024. During both the Helm Maintainers talk and Helm 'contribfest'.

The contents of this HIP will be discussed in the public Helm Dev meeting, which is recorded.

During all stages of Helm 4 development, the Release Engineer will ensure that an update on progress is given at no fewer than two Helm public dev calls each month.

## Rejected ideas

Helm 3 was largely developed along an informal version of the above model.
However, we were criticized for not documenting the process or explaining how we were going to follow the process.
This proposal provides an alternative to an "informal process" that would draw similar ire.

Multiple release engineers were also considered.
However, two things suggest multiple release engineers would not be appropriate:

1. The desire to have a single authority for architectural integrity and resolution
2. The simple fact that there are not enough Helm core maintainers to justify having a committee

We considered allowing a non-core maintainer be a release engineer, but rejected for the following reasons:

1. A release engineer needs detailed information about Helm's design, intents, and implementation. Our only way to ensure this is via maintainer-ship.
2. A non-core maintainer is not bound by the core maintainer process, and this would introduce tension and exceptionalism.

We considered allowing any Helm maintainer from any project to be the release engineer for Helm.
However, we determined that the special knowledge of the Helm core codebase is requisite for successfully fulfilling this role, especially as pertains to the technical decision making required in this role. We consider the release engineer to be more of an architect's role than a project manager's.

We considered restricting release engineer to just org maintainers. However, it is a stated goal of the org maintainers that they be focused on the organizational (not technical) aspects of the project.
Release engineering is beyond their charter.

We considered not requiring HIPs for features and changes during the Helm 4 process.
In the past, we have done without.
But also, in the past we have had substantial pushback from the community that major changes
were not discussed and were pushed through.
Furthermore, there is an almost complete absence of documentation for why decisions were made in Helm 2.
And in Helm 3, the documentation is limited to only a few draft documents.
Therefore, HIPs will provide a framework for discussion as well as a documented decision making process.
While some may complain that this is undue overhead, we believe the benefits far outweigh the burden.

We considered removing the mandatory minimum times for planning and for release preparation.
However, a major version transition must be done with care, especially on a project with as much impact as Helm's.
It is in the community's best interest for the developers to move at a deliberate pace with public timeframes.

## References

- The Helm org's [governance documents](https://github.com/helm/community/tree/master/governance)
- The [Helm 3 planning documents](https://github.com/helm/community/tree/master/hips/archives/helm/helm-v3)
- Helm's [backward compatibility rules (HIP-0004)](./hip-0004.md)

## Appendix

### Helm 4 proposal template

```
TBD
```